Secured and monitored web infrastructure

This infrastructure secures and monitors a distributed web system.
HTTPS ensures encrypted traffic.
* A firewall protects the load balancer (HAProxy), which distributes requests to two backend servers.
* Each server runs Nginx, app code, MySQL (Primary or Replica), and a monitoring agent.
* A centralized monitoring tool collects logs and metrics.

                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚    User's Browser       â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                             HTTPS via SSL
                                    â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚  Firewall (FW #1)   â”‚
                         â”‚    + Load Balancer  â”‚
                         â”‚     (HAProxy w/SSL) â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Firewall (FW #2)            â”‚  â”‚ Firewall (FW #3)       â”‚
        â”‚ Web/App/DB Server 1         â”‚  â”‚ Web/App/DB Server 2    â”‚
        â”‚ - Nginx                     â”‚  â”‚ - Nginx                â”‚
        â”‚ - App Code                  â”‚  â”‚ - App Code             â”‚
        â”‚ - MySQL (Primary DB)        â”‚  â”‚ - MySQL (Replica DB)   â”‚
        â”‚ - Monitoring Agent          â”‚  â”‚ - Monitoring Agent     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚                          â”‚
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚ Monitoring Collector â”‚ â† (e.g. SumoLogic, Datadog)
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜



Specifics About This Infrastructure
ğŸ”¹ For every additional element, why you are adding it
Firewall:
 Protects each server by filtering incoming and outgoing network traffic based on security rules.


HTTPS (SSL):
 Encrypts data between the user's browser and the server to ensure privacy and prevent interception.


Monitoring Agents:
 Installed on each server to collect system metrics, logs, and performance data.


Monitoring Collector:
 Central server (e.g., SumoLogic or Datadog) that receives and displays data from the agents for analysis.


ğŸ”¹ What are firewalls for
* To block unauthorized access.
* To allow only specific traffic (e.g., port 80/443 for web, 22 for SSH).
* To reduce the attack surface of the system.

ğŸ”¹ Why is the traffic served over HTTPS
* To encrypt communication between client and server.
* To protect sensitive data (like login credentials or personal info).
* To prevent MITM (Man-in-the-Middle) attacks and data leaks.
* To improve SEO and browser compatibility, as most modern browsers require HTTPS.

ğŸ”¹ What monitoring is used for
* To detect issues in real time (downtime, CPU overload, memory spikes).
* To track performance, availability, and usage metrics.
* To trigger alerts when thresholds are breached.
* To assist in debugging and post-incident analysis.

ğŸ”¹ How the monitoring tool is collecting data
Monitoring agents run on each server and:

* Collect logs (e.g., Nginx access logs, syslogs).
* Gather metrics (CPU, memory, disk, uptime, etc.).
* Send this data to the central Monitoring Collector via secure channels.

ğŸ”¹ Explain what to do if you want to monitor your web server QPS (Queries Per Second)
Configure your monitoring agent to read from:


* Nginx access logs, or
* HAProxy statistics endpoint
* Parse log lines or request counters to calculate:
* Number of HTTP requests per second
* Visualize this data in the monitoring dashboard (e.g., Datadog, Prometheus + Grafana).
